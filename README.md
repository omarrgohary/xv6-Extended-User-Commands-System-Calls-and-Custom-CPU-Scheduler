# ðŸ§  xv6-Enhanced: Custom Commands, System Calls, and CPU Scheduling Extensions
--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------

This project extends the [MIT xv6](https://pdos.csail.mit.edu/6.828/2022/xv6.html) operating system with new **user-level commands**, **kernel-level system calls**, and **CPU scheduling algorithms**. It provides a comprehensive learning experience in low-level OS development by modifying the xv6 kernel, enhancing user-space utilities, and exploring advanced scheduling policies with performance metrics.

--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------

Table of Contents

- [Overview](#overview)
- [Features](#features)
- [User-Level Commands](#user-level-commands)
- [Custom System Calls](#custom-system-calls)
- [CPU Scheduling Enhancements](#cpu-scheduling-enhancements)
- [Performance Metrics](#performance-metrics)
- [Build & Run](#build--run)
- [Example Outputs](#example-outputs)
- [Learning Objectives](#learning-objectives)
- [Credits](#credits)

--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------

Overview:

This project focuses on extending xv6â€™s functionality to include:

- A set of Unix-like user-space commands
- New kernel system calls with complete syscall handlers
- Implementation of CPU scheduling algorithms (FCFS and Priority-Based)
- Real-time collection of scheduling performance metrics (Turnaround & Waiting Time)

--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------

Features:

- Unix-style user-space commands  
- Robust argument validation and help support  
- System-level metrics via new kernel system calls  
- Dynamic runtime CPU scheduler switching  
- Accurate performance tracking and reporting  

--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------

User-Level Commands:

| Command     | Description |
|-------------|-------------|
| `sleep`     | Pauses execution for a user-defined number of ticks |
| `find`      | Recursively searches for a file in a directory and its subdirectories |
| `touch`     | Creates a new empty file if it doesnâ€™t already exist |
| `mv`        | Moves or renames files using `link` and `unlink` |
| `cp`        | Copies content from one file to another |
| `add`       | Adds two integers provided as command-line arguments |
| `fact`      | Calculates the factorial of a given non-negative integer |
| `ps`        | Displays process table (PID, PPID, state, memory size, name) |
| `kbdint`    | Displays number of keyboard interrupts since boot |
| `countsyscall` | Returns total number of system calls invoked |
| `datetime`  | Retrieves current date and time from system |
| `rand`      | Outputs a pseudo-random number generated by the kernel |

--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------

**Help Feature Example:**
```bash
$ add ?
Usage: add number1 number2
ðŸ”§ Custom System Calls
System Call	Description
kbdint()	Returns the total number of keyboard interrupts since boot
countsyscall()	Returns the total number of system calls invoked
getppid()	Returns the parent process ID of the calling process
getptable(buf)	Fills a user buffer with the process table info (PID, PPID, state, name, memory size)
datetime()	Retrieves current system date and time
rand()	Returns a pseudo-random integer (LCG implementation)

All system calls are tested using corresponding user-level commands.

--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------

CPU Scheduling Enhancements:

Two additional schedulers were implemented to run alongside the default Round-Robin (RR):

1. First Come First Serve (FCFS)
  Non-preemptive

Prioritizes processes based on creation time

2. Priority-Based Scheduling
Preemptive

--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------

Uses a static priority field for each process

Schedulers can be dynamically switched at runtime using designated system calls.


Performance Metrics:

- For each scheduler, the system tracks and reports:
- Average Turnaround Time: Time from process creation to termination
- Average Waiting Time: Time spent in the ready queue

--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------

These metrics are essential for comparing the efficiency of different CPU scheduling algorithms.

Build & Run:
  Clone the xv6 repository and replace with project files:
  bash
  Copy
  Edit
  git clone https://github.com/mit-pdos/xv6-riscv.git
  cd xv6-riscv
  Replace or merge the following modified files:
  kernel/
  user/
  Makefile

--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------

Compile and run:

- bash
- Copy
- Edit
- make qemu
--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
Example Outputs:

$ fact 5
Factorial: 120

$ add 2 9
Result: 11

$ ps
PID PPID STATE     SIZE NAME
1   0    running   1024 init
...

$ kbdint
Keyboard Interrupts: 38

$ datetime
2025-05-18 14:32:09
--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------

Learning Objectives:

- Gain hands-on experience in operating system kernel development
- Understand user/kernel space interaction through system calls
- Explore low-level process management and CPU scheduling
- Implement Unix-style command-line utilities in C
- Enhance debugging, testing, and performance measurement skills in OS
--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------

Credits
- Author: Omar El Gohary, Youssef Azmy
- University: Arab Academy for Science, Technology, and Maritime Transport
- Year: 2025
- Contact: omarrmgohary@gmail.com, youssefazmy36@gmail.com
--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------



